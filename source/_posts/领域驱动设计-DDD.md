---
title: 领域驱动设计-DDD
date: 2023-10-07 11:23:21
tags: [DDD,前端架构]
---

### 1. 为什么需要DDD

复杂系统设计：系统多，业务逻辑复杂，概念不清晰，有什么合适的方法帮助我们理清楚边界，逻辑和概念？

多团队协同：边界不清晰，系统依赖复杂，语言不统一导致沟通和理解困难。有没有一种方式把业务和技术概念统一，大家用一种语言沟通。例如：航程是大家所理解的航程吗？

设计与实现一致性：PRD，详细设计和代码实现天差万别。有什么方法可以把业务需求快速转换为设计，同时还要保持设计与代码的一致性？

架构统一，可复用资产和扩展性：当前取决于开发的同学具备很好的抽象能力和高编程的技能。有什么好的方法指导我们做抽象和实现。

### 2. DDD的价值

边界清晰的设计方法：通过领域划分，识别哪些需求应该在哪些领域，不断拉齐团队对需求的认知，分而治之，控制规模。

统一语言：团队在有边界的上下文中有意识地形成对事物进行统一的描述，形成统一的概念(模型)。

业务领域的知识沉淀：通过反复论证和提炼模型，使得模型必须与业务的真实世界保持一致。促使知识(模型)可以很好地传递和维护。

面向业务建模：领域模型与数据模型分离，业务复杂度和技术复杂度分离。

### 3. DDD架构

1. 分层架构

![](images/ddd-1.png)

用户接口层：调用应用层完成具体用户请求。包含：controller，远程调用服务等

应用层App：尽量简单，不包含业务规则，而只为了下一层中的领域对象做协调任务，分配工作，重点对领域层做编排完成复杂业务场景。包含：AppService，消息处理等

领域层Domain：负责表达业务概念和业务逻辑，领域层是系统的核心。包含：模型，值对象，域服务，事件

基础层：对所有上层提供技术能力，包括：数据操作，发送消息，消费消息，缓存等

调用关系：用户接口层->应用层->领域层->基础层

依赖关系：用户接口层->应用层->领域层->基础层

2.  六边形架构

![](images/ddd-2.png)

![](images/ddd-3.png)

六边形架构：系统通过适配器的方式与外部交互，将应用服务于领域服务封装在系统内部

分层架构：它依然是分层架构，它核心改变的是依赖关系。

领域层依赖倒置：领域层依赖基础层倒置成基础层依赖领域层，这个简单的变化使得领域层不依赖任务层，其他层都依赖领域层，使得领域层只表达业务逻辑且稳定。


### 4. 结论

好的模型，可以沉淀组织资产，不好的模型，逐渐成为负债。

功能才是表象，模型才是内在。

建模过程是不断猜想与反驳的过程。

演化观点是建模过程的基本心智模式。